{"version":3,"file":"platform-server.umd.js","sources":["../../../../../external/npm/node_modules/tslib/tslib.es6.js","../../../../../packages/platform-server/src/domino_adapter.ts","../../../../../packages/platform-server/src/platform_state.ts","../../../../../packages/platform-server/src/tokens.ts","../../../../../packages/platform-server/src/http.ts","../../../../../packages/platform-server/src/location.ts","../../../../../packages/platform-server/src/server_events.ts","../../../../../packages/platform-server/src/server_renderer.ts","../../../../../packages/platform-server/src/styles_host.ts","../../../../../packages/platform-server/src/server.ts","../../../../../packages/platform-server/src/transfer_state.ts","../../../../../packages/platform-server/src/utils.ts","../../../../../packages/platform-server/src/private_export.ts","../../../../../packages/platform-server/src/version.ts","../../../../../packages/platform-server/src/platform-server.ts","../../../../../packages/platform-server/public_api.ts","../../../../../packages/platform-server/index.ts","../../../../../packages/platform-server/platform-server.ts"],"sourcesContent":["/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n});\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nvar __setModuleDefault = Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nconst domino = require('domino');\n\nimport {ɵBrowserDomAdapter as BrowserDomAdapter} from '@angular/platform-browser';\nimport {ɵsetRootDomAdapter as setRootDomAdapter} from '@angular/common';\n\nfunction _notImplemented(methodName: string) {\n  return new Error('This method is not implemented in DominoAdapter: ' + methodName);\n}\n\nfunction setDomTypes() {\n  // Make all Domino types available as types in the global env.\n  Object.assign(global, domino.impl);\n  (global as any)['KeyboardEvent'] = domino.impl.Event;\n}\n\n/**\n * Parses a document string to a Document object.\n */\nexport function parseDocument(html: string, url = '/') {\n  let window = domino.createWindow(html, url);\n  let doc = window.document;\n  return doc;\n}\n\n/**\n * Serializes a document to string.\n */\nexport function serializeDocument(doc: Document): string {\n  return (doc as any).serialize();\n}\n\n/**\n * DOM Adapter for the server platform based on https://github.com/fgnass/domino.\n */\nexport class DominoAdapter extends BrowserDomAdapter {\n  static makeCurrent() {\n    setDomTypes();\n    setRootDomAdapter(new DominoAdapter());\n  }\n\n  private static defaultDoc: Document;\n\n  log(error: string) {\n    // tslint:disable-next-line:no-console\n    console.log(error);\n  }\n\n  logGroup(error: string) {\n    console.error(error);\n  }\n\n  logGroupEnd() {}\n\n  supportsDOMEvents(): boolean {\n    return false;\n  }\n\n  createHtmlDocument(): HTMLDocument {\n    return parseDocument('<html><head><title>fakeTitle</title></head><body></body></html>');\n  }\n\n  getDefaultDocument(): Document {\n    if (!DominoAdapter.defaultDoc) {\n      DominoAdapter.defaultDoc = domino.createDocument();\n    }\n    return DominoAdapter.defaultDoc;\n  }\n\n  isElementNode(node: any): boolean {\n    return node ? node.nodeType === DominoAdapter.defaultDoc.ELEMENT_NODE : false;\n  }\n  isShadowRoot(node: any): boolean {\n    return node.shadowRoot == node;\n  }\n\n  getProperty(el: Element, name: string): any {\n    if (name === 'href') {\n      // Domino tries to resolve href-s which we do not want. Just return the\n      // attribute value.\n      return el.getAttribute('href');\n    } else if (name === 'innerText') {\n      // Domino does not support innerText. Just map it to textContent.\n      return el.textContent;\n    }\n    return (<any>el)[name];\n  }\n\n  getGlobalEventTarget(doc: Document, target: string): EventTarget|null {\n    if (target === 'window') {\n      return doc.defaultView;\n    }\n    if (target === 'document') {\n      return doc;\n    }\n    if (target === 'body') {\n      return doc.body;\n    }\n    return null;\n  }\n\n  getBaseHref(doc: Document): string {\n    const base = doc.documentElement!.querySelector('base');\n    let href = '';\n    if (base) {\n      href = base.getAttribute('href')!;\n    }\n    // TODO(alxhub): Need relative path logic from BrowserDomAdapter here?\n    return href;\n  }\n\n  dispatchEvent(el: Node, evt: any) {\n    el.dispatchEvent(evt);\n\n    // Dispatch the event to the window also.\n    const doc = el.ownerDocument || el;\n    const win = (doc as any).defaultView;\n    if (win) {\n      win.dispatchEvent(evt);\n    }\n  }\n\n  getHistory(): History {\n    throw _notImplemented('getHistory');\n  }\n  getLocation(): Location {\n    throw _notImplemented('getLocation');\n  }\n  getUserAgent(): string {\n    return 'Fake user agent';\n  }\n\n  performanceNow(): number {\n    return Date.now();\n  }\n\n  supportsCookies(): boolean {\n    return false;\n  }\n  getCookie(name: string): string {\n    throw _notImplemented('getCookie');\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT} from '@angular/common';\nimport {Inject, Injectable} from '@angular/core';\n\nimport {serializeDocument} from './domino_adapter';\n\n/**\n * Representation of the current platform state.\n *\n * @publicApi\n */\n@Injectable()\nexport class PlatformState {\n  constructor(@Inject(DOCUMENT) private _doc: any) {}\n\n  /**\n   * Renders the current state of the platform to string.\n   */\n  renderToString(): string {\n    return serializeDocument(this._doc);\n  }\n\n  /**\n   * Returns the current DOM state.\n   */\n  getDocument(): any {\n    return this._doc;\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {InjectionToken} from '@angular/core';\n\n/**\n * Config object passed to initialize the platform.\n *\n * @publicApi\n */\nexport interface PlatformConfig {\n  /**\n   * The initial DOM to use to bootstrap the server application.\n   * @default create a new DOM using Domino\n   */\n  document?: string;\n  /**\n   * The URL for the current application state. This is\n   * used for initializing the platform's location and\n   * for setting absolute URL resolution for HTTP requests.\n   * @default none\n   */\n  url?: string;\n  /**\n   * Whether to append the absolute URL to any relative HTTP\n   * requests. If set to true, this logic executes prior to\n   * any HTTP interceptors that may run later on in the request.\n   * @default false\n   */\n  useAbsoluteUrl?: boolean;\n}\n\n/**\n * The DI token for setting the initial config for the platform.\n *\n * @publicApi\n */\nexport const INITIAL_CONFIG = new InjectionToken<PlatformConfig>('Server.INITIAL_CONFIG');\n\n/**\n * A function that will be executed when calling `renderModuleFactory` or `renderModule` just\n * before current platform state is rendered to string.\n *\n * @publicApi\n */\nexport const BEFORE_APP_SERIALIZED =\n    new InjectionToken<Array<() => void | Promise<void>>>('Server.RENDER_MODULE_HOOK');\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\nimport {INITIAL_CONFIG, PlatformConfig} from './tokens';\n\n\nconst xhr2: any = require('xhr2');\n\nimport {Injectable, Injector, Provider} from '@angular/core';\nimport {PlatformLocation} from '@angular/common';\nimport {HttpEvent, HttpRequest, HttpHandler, HttpBackend, XhrFactory, ɵHttpInterceptingHandler as HttpInterceptingHandler} from '@angular/common/http';\nimport {Observable, Observer, Subscription} from 'rxjs';\n\n// @see https://www.w3.org/Protocols/HTTP/1.1/draft-ietf-http-v11-spec-01#URI-syntax\nconst isAbsoluteUrl = /^[a-zA-Z\\-\\+.]+:\\/\\//;\n\n@Injectable()\nexport class ServerXhr implements XhrFactory {\n  build(): XMLHttpRequest {\n    return new xhr2.XMLHttpRequest();\n  }\n}\n\nexport abstract class ZoneMacroTaskWrapper<S, R> {\n  wrap(request: S): Observable<R> {\n    return new Observable((observer: Observer<R>) => {\n      let task: Task = null!;\n      let scheduled: boolean = false;\n      let sub: Subscription|null = null;\n      let savedResult: any = null;\n      let savedError: any = null;\n\n      const scheduleTask = (_task: Task) => {\n        task = _task;\n        scheduled = true;\n\n        const delegate = this.delegate(request);\n        sub = delegate.subscribe(\n            res => savedResult = res,\n            err => {\n              if (!scheduled) {\n                throw new Error(\n                    'An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n              }\n              savedError = err;\n              scheduled = false;\n              task.invoke();\n            },\n            () => {\n              if (!scheduled) {\n                throw new Error(\n                    'An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n              }\n              scheduled = false;\n              task.invoke();\n            });\n      };\n\n      const cancelTask = (_task: Task) => {\n        if (!scheduled) {\n          return;\n        }\n        scheduled = false;\n        if (sub) {\n          sub.unsubscribe();\n          sub = null;\n        }\n      };\n\n      const onComplete = () => {\n        if (savedError !== null) {\n          observer.error(savedError);\n        } else {\n          observer.next(savedResult);\n          observer.complete();\n        }\n      };\n\n      // MockBackend for Http is synchronous, which means that if scheduleTask is by\n      // scheduleMacroTask, the request will hit MockBackend and the response will be\n      // sent, causing task.invoke() to be called.\n      const _task = Zone.current.scheduleMacroTask(\n          'ZoneMacroTaskWrapper.subscribe', onComplete, {}, () => null, cancelTask);\n      scheduleTask(_task);\n\n      return () => {\n        if (scheduled && task) {\n          task.zone.cancelTask(task);\n          scheduled = false;\n        }\n        if (sub) {\n          sub.unsubscribe();\n          sub = null;\n        }\n      };\n    });\n  }\n\n  protected abstract delegate(request: S): Observable<R>;\n}\n\nexport class ZoneClientBackend extends\n    ZoneMacroTaskWrapper<HttpRequest<any>, HttpEvent<any>> implements HttpBackend {\n  constructor(\n      private backend: HttpBackend, private platformLocation: PlatformLocation,\n      private config: PlatformConfig) {\n    super();\n  }\n\n  handle(request: HttpRequest<any>): Observable<HttpEvent<any>> {\n    const {href, protocol, hostname, port} = this.platformLocation;\n    if (this.config.useAbsoluteUrl && !isAbsoluteUrl.test(request.url) &&\n        isAbsoluteUrl.test(href)) {\n      const baseHref = this.platformLocation.getBaseHrefFromDOM() || href;\n      const urlPrefix = `${protocol}//${hostname}` + (port ? `:${port}` : '');\n      const baseUrl = new URL(baseHref, urlPrefix);\n      const url = new URL(request.url, baseUrl);\n      return this.wrap(request.clone({url: url.toString()}));\n    }\n    return this.wrap(request);\n  }\n\n  protected delegate(request: HttpRequest<any>): Observable<HttpEvent<any>> {\n    return this.backend.handle(request);\n  }\n}\n\nexport function zoneWrappedInterceptingHandler(\n    backend: HttpBackend, injector: Injector, platformLocation: PlatformLocation,\n    config: PlatformConfig) {\n  const realBackend: HttpBackend = new HttpInterceptingHandler(backend, injector);\n  return new ZoneClientBackend(realBackend, platformLocation, config);\n}\n\nexport const SERVER_HTTP_PROVIDERS: Provider[] = [\n  {provide: XhrFactory, useClass: ServerXhr}, {\n    provide: HttpHandler,\n    useFactory: zoneWrappedInterceptingHandler,\n    deps: [HttpBackend, Injector, PlatformLocation, INITIAL_CONFIG]\n  }\n];\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT, LocationChangeEvent, LocationChangeListener, PlatformLocation, ɵgetDOM as getDOM} from '@angular/common';\nimport {Inject, Injectable, Optional} from '@angular/core';\nimport {Subject} from 'rxjs';\nimport * as url from 'url';\nimport {INITIAL_CONFIG, PlatformConfig} from './tokens';\n\n\nfunction parseUrl(urlStr: string) {\n  const parsedUrl = url.parse(urlStr);\n  return {\n    hostname: parsedUrl.hostname || '',\n    protocol: parsedUrl.protocol || '',\n    port: parsedUrl.port || '',\n    pathname: parsedUrl.pathname || '',\n    search: parsedUrl.search || '',\n    hash: parsedUrl.hash || '',\n  };\n}\n\n/**\n * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n * but not the state stack.\n */\n@Injectable()\nexport class ServerPlatformLocation implements PlatformLocation {\n  public readonly href: string = '/';\n  public readonly hostname: string = '/';\n  public readonly protocol: string = '/';\n  public readonly port: string = '/';\n  public readonly pathname: string = '/';\n  public readonly search: string = '';\n  public readonly hash: string = '';\n  private _hashUpdate = new Subject<LocationChangeEvent>();\n\n  constructor(\n      @Inject(DOCUMENT) private _doc: any, @Optional() @Inject(INITIAL_CONFIG) _config: any) {\n    const config = _config as PlatformConfig | null;\n    if (!!config && !!config.url) {\n      const parsedUrl = parseUrl(config.url);\n      this.hostname = parsedUrl.hostname;\n      this.protocol = parsedUrl.protocol;\n      this.port = parsedUrl.port;\n      this.pathname = parsedUrl.pathname;\n      this.search = parsedUrl.search;\n      this.hash = parsedUrl.hash;\n      this.href = _doc.location.href;\n    }\n  }\n\n  getBaseHrefFromDOM(): string {\n    return getDOM().getBaseHref(this._doc)!;\n  }\n\n  onPopState(fn: LocationChangeListener): void {\n    // No-op: a state stack is not implemented, so\n    // no events will ever come.\n  }\n\n  onHashChange(fn: LocationChangeListener): void {\n    this._hashUpdate.subscribe(fn);\n  }\n\n  get url(): string {\n    return `${this.pathname}${this.search}${this.hash}`;\n  }\n\n  private setHash(value: string, oldUrl: string) {\n    if (this.hash === value) {\n      // Don't fire events if the hash has not changed.\n      return;\n    }\n    (this as {hash: string}).hash = value;\n    const newUrl = this.url;\n    scheduleMicroTask(\n        () => this._hashUpdate.next(\n            {type: 'hashchange', state: null, oldUrl, newUrl} as LocationChangeEvent));\n  }\n\n  replaceState(state: any, title: string, newUrl: string): void {\n    const oldUrl = this.url;\n    const parsedUrl = parseUrl(newUrl);\n    (this as {pathname: string}).pathname = parsedUrl.pathname;\n    (this as {search: string}).search = parsedUrl.search;\n    this.setHash(parsedUrl.hash, oldUrl);\n  }\n\n  pushState(state: any, title: string, newUrl: string): void {\n    this.replaceState(state, title, newUrl);\n  }\n\n  forward(): void {\n    throw new Error('Not implemented');\n  }\n\n  back(): void {\n    throw new Error('Not implemented');\n  }\n\n  // History API isn't available on server, therefore return undefined\n  getState(): unknown {\n    return undefined;\n  }\n}\n\nexport function scheduleMicroTask(fn: Function) {\n  Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT, ɵgetDOM as getDOM} from '@angular/common';\nimport {Inject, Injectable} from '@angular/core';\n\n@Injectable()\nexport class ServerEventManagerPlugin /* extends EventManagerPlugin which is private */ {\n  constructor(@Inject(DOCUMENT) private doc: any) {}\n\n  // Handle all events on the server.\n  supports(eventName: string) {\n    return true;\n  }\n\n  addEventListener(element: HTMLElement, eventName: string, handler: Function): Function {\n    return getDOM().onAndCancel(element, eventName, handler);\n  }\n\n  addGlobalEventListener(element: string, eventName: string, handler: Function): Function {\n    const target: HTMLElement = getDOM().getGlobalEventTarget(this.doc, element);\n    if (!target) {\n      throw new Error(`Unsupported event target ${target} for event ${eventName}`);\n    }\n    return this.addEventListener(target, eventName, handler);\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT, ɵgetDOM as getDOM} from '@angular/common';\nimport {DomElementSchemaRegistry} from '@angular/compiler';\nimport {Inject, Injectable, NgZone, Renderer2, RendererFactory2, RendererStyleFlags2, RendererType2, ViewEncapsulation} from '@angular/core';\nimport {EventManager, ɵflattenStyles as flattenStyles, ɵNAMESPACE_URIS as NAMESPACE_URIS, ɵSharedStylesHost as SharedStylesHost, ɵshimContentAttribute as shimContentAttribute, ɵshimHostAttribute as shimHostAttribute} from '@angular/platform-browser';\n\nconst EMPTY_ARRAY: any[] = [];\n\nconst DEFAULT_SCHEMA = new DomElementSchemaRegistry();\n\n@Injectable()\nexport class ServerRendererFactory2 implements RendererFactory2 {\n  private rendererByCompId = new Map<string, Renderer2>();\n  private defaultRenderer: Renderer2;\n  private schema = DEFAULT_SCHEMA;\n\n  constructor(\n      private eventManager: EventManager, private ngZone: NgZone,\n      @Inject(DOCUMENT) private document: any, private sharedStylesHost: SharedStylesHost) {\n    this.defaultRenderer = new DefaultServerRenderer2(eventManager, document, ngZone, this.schema);\n  }\n\n  createRenderer(element: any, type: RendererType2|null): Renderer2 {\n    if (!element || !type) {\n      return this.defaultRenderer;\n    }\n    switch (type.encapsulation) {\n      case ViewEncapsulation.Native:\n      case ViewEncapsulation.Emulated: {\n        let renderer = this.rendererByCompId.get(type.id);\n        if (!renderer) {\n          renderer = new EmulatedEncapsulationServerRenderer2(\n              this.eventManager, this.document, this.ngZone, this.sharedStylesHost, this.schema,\n              type);\n          this.rendererByCompId.set(type.id, renderer);\n        }\n        (<EmulatedEncapsulationServerRenderer2>renderer).applyToHost(element);\n        return renderer;\n      }\n      default: {\n        if (!this.rendererByCompId.has(type.id)) {\n          const styles = flattenStyles(type.id, type.styles, []);\n          this.sharedStylesHost.addStyles(styles);\n          this.rendererByCompId.set(type.id, this.defaultRenderer);\n        }\n        return this.defaultRenderer;\n      }\n    }\n  }\n\n  begin() {}\n  end() {}\n}\n\nclass DefaultServerRenderer2 implements Renderer2 {\n  data: {[key: string]: any} = Object.create(null);\n\n  constructor(\n      private eventManager: EventManager, protected document: any, private ngZone: NgZone,\n      private schema: DomElementSchemaRegistry) {}\n\n  destroy(): void {}\n\n  destroyNode: null;\n\n  createElement(name: string, namespace?: string, debugInfo?: any): any {\n    if (namespace) {\n      const doc = this.document || getDOM().getDefaultDocument();\n      // TODO(FW-811): Ivy may cause issues here because it's passing around\n      // full URIs for namespaces, therefore this lookup will fail.\n      return doc.createElementNS(NAMESPACE_URIS[namespace], name);\n    }\n\n    return getDOM().createElement(name, this.document);\n  }\n\n  createComment(value: string, debugInfo?: any): any {\n    return getDOM().getDefaultDocument().createComment(value);\n  }\n\n  createText(value: string, debugInfo?: any): any {\n    const doc = getDOM().getDefaultDocument();\n    return doc.createTextNode(value);\n  }\n\n  appendChild(parent: any, newChild: any): void {\n    parent.appendChild(newChild);\n  }\n\n  insertBefore(parent: any, newChild: any, refChild: any): void {\n    if (parent) {\n      parent.insertBefore(newChild, refChild);\n    }\n  }\n\n  removeChild(parent: any, oldChild: any): void {\n    if (parent) {\n      parent.removeChild(oldChild);\n    }\n  }\n\n  selectRootElement(selectorOrNode: string|any, debugInfo?: any): any {\n    let el: any;\n    if (typeof selectorOrNode === 'string') {\n      el = this.document.querySelector(selectorOrNode);\n      if (!el) {\n        throw new Error(`The selector \"${selectorOrNode}\" did not match any elements`);\n      }\n    } else {\n      el = selectorOrNode;\n    }\n    while (el.firstChild) {\n      el.removeChild(el.firstChild);\n    }\n    return el;\n  }\n\n  parentNode(node: any): any {\n    return node.parentNode;\n  }\n\n  nextSibling(node: any): any {\n    return node.nextSibling;\n  }\n\n  setAttribute(el: any, name: string, value: string, namespace?: string): void {\n    if (namespace) {\n      // TODO(FW-811): Ivy may cause issues here because it's passing around\n      // full URIs for namespaces, therefore this lookup will fail.\n      el.setAttributeNS(NAMESPACE_URIS[namespace], namespace + ':' + name, value);\n    } else {\n      el.setAttribute(name, value);\n    }\n  }\n\n  removeAttribute(el: any, name: string, namespace?: string): void {\n    if (namespace) {\n      // TODO(FW-811): Ivy may cause issues here because it's passing around\n      // full URIs for namespaces, therefore this lookup will fail.\n      el.removeAttributeNS(NAMESPACE_URIS[namespace], name);\n    } else {\n      el.removeAttribute(name);\n    }\n  }\n\n  addClass(el: any, name: string): void {\n    el.classList.add(name);\n  }\n\n  removeClass(el: any, name: string): void {\n    el.classList.remove(name);\n  }\n\n  setStyle(el: any, style: string, value: any, flags: RendererStyleFlags2): void {\n    style = style.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n    const styleMap = _readStyleAttribute(el);\n    styleMap[style] = value == null ? '' : value;\n    _writeStyleAttribute(el, styleMap);\n  }\n\n  removeStyle(el: any, style: string, flags: RendererStyleFlags2): void {\n    // IE requires '' instead of null\n    // see https://github.com/angular/angular/issues/7916\n    this.setStyle(el, style, '', flags);\n  }\n\n  // The value was validated already as a property binding, against the property name.\n  // To know this value is safe to use as an attribute, the security context of the\n  // attribute with the given name is checked against that security context of the\n  // property.\n  private _isSafeToReflectProperty(tagName: string, propertyName: string): boolean {\n    return this.schema.securityContext(tagName, propertyName, true) ===\n        this.schema.securityContext(tagName, propertyName, false);\n  }\n\n  setProperty(el: any, name: string, value: any): void {\n    checkNoSyntheticProp(name, 'property');\n    if (name === 'innerText') {\n      // Domino does not support innerText. Just map it to textContent.\n      el.textContent = value;\n    }\n    (<any>el)[name] = value;\n    // Mirror property values for known HTML element properties in the attributes.\n    // Skip `innerhtml` which is conservatively marked as an attribute for security\n    // purposes but is not actually an attribute.\n    const tagName = (el.tagName as string).toLowerCase();\n    if (value != null && (typeof value === 'number' || typeof value == 'string') &&\n        name.toLowerCase() !== 'innerhtml' && this.schema.hasElement(tagName, EMPTY_ARRAY) &&\n        this.schema.hasProperty(tagName, name, EMPTY_ARRAY) &&\n        this._isSafeToReflectProperty(tagName, name)) {\n      this.setAttribute(el, name, value.toString());\n    }\n  }\n\n  setValue(node: any, value: string): void {\n    node.textContent = value;\n  }\n\n  listen(\n      target: 'document'|'window'|'body'|any, eventName: string,\n      callback: (event: any) => boolean): () => void {\n    checkNoSyntheticProp(eventName, 'listener');\n    if (typeof target === 'string') {\n      return <() => void>this.eventManager.addGlobalEventListener(\n          target, eventName, this.decoratePreventDefault(callback));\n    }\n    return <() => void>this.eventManager.addEventListener(\n               target, eventName, this.decoratePreventDefault(callback)) as () => void;\n  }\n\n  private decoratePreventDefault(eventHandler: Function): Function {\n    return (event: any) => {\n      // Ivy uses `Function` as a special token that allows us to unwrap the function\n      // so that it can be invoked programmatically by `DebugNode.triggerEventHandler`.\n      if (event === Function) {\n        return eventHandler;\n      }\n\n      // Run the event handler inside the ngZone because event handlers are not patched\n      // by Zone on the server. This is required only for tests.\n      const allowDefaultBehavior = this.ngZone.runGuarded(() => eventHandler(event));\n      if (allowDefaultBehavior === false) {\n        event.preventDefault();\n        event.returnValue = false;\n      }\n\n      return undefined;\n    };\n  }\n}\n\nconst AT_CHARCODE = '@'.charCodeAt(0);\nfunction checkNoSyntheticProp(name: string, nameKind: string) {\n  if (name.charCodeAt(0) === AT_CHARCODE) {\n    throw new Error(`Found the synthetic ${nameKind} ${\n        name}. Please include either \"BrowserAnimationsModule\" or \"NoopAnimationsModule\" in your application.`);\n  }\n}\n\nclass EmulatedEncapsulationServerRenderer2 extends DefaultServerRenderer2 {\n  private contentAttr: string;\n  private hostAttr: string;\n\n  constructor(\n      eventManager: EventManager, document: any, ngZone: NgZone, sharedStylesHost: SharedStylesHost,\n      schema: DomElementSchemaRegistry, private component: RendererType2) {\n    super(eventManager, document, ngZone, schema);\n    // Add a 's' prefix to style attributes to indicate server.\n    const componentId = 's' + component.id;\n    const styles = flattenStyles(componentId, component.styles, []);\n    sharedStylesHost.addStyles(styles);\n\n    this.contentAttr = shimContentAttribute(componentId);\n    this.hostAttr = shimHostAttribute(componentId);\n  }\n\n  applyToHost(element: any) {\n    super.setAttribute(element, this.hostAttr, '');\n  }\n\n  createElement(parent: any, name: string): Element {\n    const el = super.createElement(parent, name, this.document);\n    super.setAttribute(el, this.contentAttr, '');\n    return el;\n  }\n}\n\nfunction _readStyleAttribute(element: any): {[name: string]: string} {\n  const styleMap: {[name: string]: string} = {};\n  const styleAttribute = element.getAttribute('style');\n  if (styleAttribute) {\n    const styleList = styleAttribute.split(/;+/g);\n    for (let i = 0; i < styleList.length; i++) {\n      const style = styleList[i].trim();\n      if (style.length > 0) {\n        const colonIndex = style.indexOf(':');\n        if (colonIndex === -1) {\n          throw new Error(`Invalid CSS style: ${style}`);\n        }\n        const name = style.substr(0, colonIndex).trim();\n        styleMap[name] = style.substr(colonIndex + 1).trim();\n      }\n    }\n  }\n  return styleMap;\n}\n\nfunction _writeStyleAttribute(element: any, styleMap: {[name: string]: string}) {\n  let styleAttrValue = '';\n  for (const key in styleMap) {\n    const newValue = styleMap[key];\n    if (newValue != null) {\n      styleAttrValue += key + ':' + styleMap[key] + ';';\n    }\n  }\n  element.setAttribute('style', styleAttrValue);\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT, ɵgetDOM as getDOM} from '@angular/common';\nimport {Inject, Injectable, Optional} from '@angular/core';\nimport {ɵSharedStylesHost as SharedStylesHost, ɵTRANSITION_ID} from '@angular/platform-browser';\n\n@Injectable()\nexport class ServerStylesHost extends SharedStylesHost {\n  private head: any = null;\n  private _styleNodes = new Set<HTMLElement>();\n\n  constructor(\n      @Inject(DOCUMENT) private doc: any,\n      @Optional() @Inject(ɵTRANSITION_ID) private transitionId: string) {\n    super();\n    this.head = doc.getElementsByTagName('head')[0];\n  }\n\n  private _addStyle(style: string): void {\n    let adapter = getDOM();\n    const el = adapter.createElement('style');\n    el.textContent = style;\n    if (!!this.transitionId) {\n      el.setAttribute('ng-transition', this.transitionId);\n    }\n    this.head.appendChild(el);\n    this._styleNodes.add(el);\n  }\n\n  onStylesAdded(additions: Set<string>) {\n    additions.forEach(style => this._addStyle(style));\n  }\n\n  ngOnDestroy() {\n    this._styleNodes.forEach(styleNode => styleNode.remove());\n  }\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ɵAnimationEngine} from '@angular/animations/browser';\nimport {DOCUMENT, PlatformLocation, ViewportScroller, ɵgetDOM as getDOM, ɵNullViewportScroller as NullViewportScroller, ɵPLATFORM_SERVER_ID as PLATFORM_SERVER_ID} from '@angular/common';\nimport {HttpClientModule} from '@angular/common/http';\nimport {createPlatformFactory, Injector, NgModule, NgZone, Optional, PLATFORM_ID, PLATFORM_INITIALIZER, platformCore, PlatformRef, Provider, RendererFactory2, StaticProvider, Testability, ɵALLOW_MULTIPLE_PLATFORMS as ALLOW_MULTIPLE_PLATFORMS, ɵsetDocument} from '@angular/core';\nimport {BrowserModule, EVENT_MANAGER_PLUGINS, ɵSharedStylesHost as SharedStylesHost} from '@angular/platform-browser';\nimport {ɵplatformCoreDynamic as platformCoreDynamic} from '@angular/platform-browser-dynamic';\nimport {NoopAnimationsModule, ɵAnimationRendererFactory} from '@angular/platform-browser/animations';\n\nimport {DominoAdapter, parseDocument} from './domino_adapter';\nimport {SERVER_HTTP_PROVIDERS} from './http';\nimport {ServerPlatformLocation} from './location';\nimport {PlatformState} from './platform_state';\nimport {ServerEventManagerPlugin} from './server_events';\nimport {ServerRendererFactory2} from './server_renderer';\nimport {ServerStylesHost} from './styles_host';\nimport {INITIAL_CONFIG, PlatformConfig} from './tokens';\n\nfunction notSupported(feature: string): Error {\n  throw new Error(`platform-server does not support '${feature}'.`);\n}\n\nexport const INTERNAL_SERVER_PLATFORM_PROVIDERS: StaticProvider[] = [\n  {provide: DOCUMENT, useFactory: _document, deps: [Injector]},\n  {provide: PLATFORM_ID, useValue: PLATFORM_SERVER_ID},\n  {provide: PLATFORM_INITIALIZER, useFactory: initDominoAdapter, multi: true, deps: [Injector]}, {\n    provide: PlatformLocation,\n    useClass: ServerPlatformLocation,\n    deps: [DOCUMENT, [Optional, INITIAL_CONFIG]]\n  },\n  {provide: PlatformState, deps: [DOCUMENT]},\n  // Add special provider that allows multiple instances of platformServer* to be created.\n  {provide: ALLOW_MULTIPLE_PLATFORMS, useValue: true}\n];\n\nfunction initDominoAdapter(injector: Injector) {\n  return () => {\n    DominoAdapter.makeCurrent();\n  };\n}\n\nexport function instantiateServerRendererFactory(\n    renderer: RendererFactory2, engine: ɵAnimationEngine, zone: NgZone) {\n  return new ɵAnimationRendererFactory(renderer, engine, zone);\n}\n\nexport const SERVER_RENDER_PROVIDERS: Provider[] = [\n  ServerRendererFactory2,\n  {\n    provide: RendererFactory2,\n    useFactory: instantiateServerRendererFactory,\n    deps: [ServerRendererFactory2, ɵAnimationEngine, NgZone]\n  },\n  ServerStylesHost,\n  {provide: SharedStylesHost, useExisting: ServerStylesHost},\n  {provide: EVENT_MANAGER_PLUGINS, multi: true, useClass: ServerEventManagerPlugin},\n];\n\n/**\n * The ng module for the server.\n *\n * @publicApi\n */\n@NgModule({\n  exports: [BrowserModule],\n  imports: [HttpClientModule, NoopAnimationsModule],\n  providers: [\n    SERVER_RENDER_PROVIDERS,\n    SERVER_HTTP_PROVIDERS,\n    {provide: Testability, useValue: null},\n    {provide: ViewportScroller, useClass: NullViewportScroller},\n  ],\n})\nexport class ServerModule {\n}\n\nfunction _document(injector: Injector) {\n  let config: PlatformConfig|null = injector.get(INITIAL_CONFIG, null);\n  const document = config && config.document ? parseDocument(config.document, config.url) :\n                                               getDOM().createHtmlDocument();\n  // Tell ivy about the global document\n  ɵsetDocument(document);\n  return document;\n}\n\n/**\n * @publicApi\n */\nexport const platformServer: (extraProviders?: StaticProvider[]|undefined) => PlatformRef =\n    createPlatformFactory(platformCore, 'server', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n\n/**\n * The server platform that supports the runtime compiler.\n *\n * @publicApi\n */\nexport const platformDynamicServer =\n    createPlatformFactory(platformCoreDynamic, 'serverDynamic', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {DOCUMENT} from '@angular/common';\nimport {APP_ID, NgModule} from '@angular/core';\nimport {TransferState, ɵescapeHtml as escapeHtml} from '@angular/platform-browser';\n\nimport {BEFORE_APP_SERIALIZED} from './tokens';\n\nexport function serializeTransferStateFactory(\n    doc: Document, appId: string, transferStore: TransferState) {\n  return () => {\n    const script = doc.createElement('script');\n    script.id = appId + '-state';\n    script.setAttribute('type', 'application/json');\n    script.textContent = escapeHtml(transferStore.toJson());\n    doc.body.appendChild(script);\n  };\n}\n\n/**\n * NgModule to install on the server side while using the `TransferState` to transfer state from\n * server to client.\n *\n * @publicApi\n */\n@NgModule({\n  providers: [\n    TransferState, {\n      provide: BEFORE_APP_SERIALIZED,\n      useFactory: serializeTransferStateFactory,\n      deps: [DOCUMENT, APP_ID, TransferState],\n      multi: true,\n    }\n  ]\n})\nexport class ServerTransferStateModule {\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {ApplicationRef, NgModuleFactory, NgModuleRef, PlatformRef, StaticProvider, Type, ɵisPromise} from '@angular/core';\nimport {ɵTRANSITION_ID} from '@angular/platform-browser';\nimport {first} from 'rxjs/operators';\n\nimport {PlatformState} from './platform_state';\nimport {platformDynamicServer, platformServer} from './server';\nimport {BEFORE_APP_SERIALIZED, INITIAL_CONFIG} from './tokens';\n\ninterface PlatformOptions {\n  document?: string;\n  url?: string;\n  extraProviders?: StaticProvider[];\n}\n\nfunction _getPlatform(\n    platformFactory: (extraProviders: StaticProvider[]) => PlatformRef,\n    options: PlatformOptions): PlatformRef {\n  const extraProviders = options.extraProviders ? options.extraProviders : [];\n  return platformFactory([\n    {provide: INITIAL_CONFIG, useValue: {document: options.document, url: options.url}},\n    extraProviders\n  ]);\n}\n\nfunction _render<T>(\n    platform: PlatformRef, moduleRefPromise: Promise<NgModuleRef<T>>): Promise<string> {\n  return moduleRefPromise.then((moduleRef) => {\n    const transitionId = moduleRef.injector.get(ɵTRANSITION_ID, null);\n    if (!transitionId) {\n      throw new Error(\n          `renderModule[Factory]() requires the use of BrowserModule.withServerTransition() to ensure\nthe server-rendered app can be properly bootstrapped into a client app.`);\n    }\n    const applicationRef: ApplicationRef = moduleRef.injector.get(ApplicationRef);\n    return applicationRef.isStable.pipe((first((isStable: boolean) => isStable)))\n        .toPromise()\n        .then(() => {\n          const platformState = platform.injector.get(PlatformState);\n\n          const asyncPromises: Promise<any>[] = [];\n\n          // Run any BEFORE_APP_SERIALIZED callbacks just before rendering to string.\n          const callbacks = moduleRef.injector.get(BEFORE_APP_SERIALIZED, null);\n          if (callbacks) {\n            for (const callback of callbacks) {\n              try {\n                const callbackResult = callback();\n                if (ɵisPromise(callbackResult)) {\n                  // TODO: in TS3.7, callbackResult is void.\n                  asyncPromises.push(callbackResult as any);\n                }\n\n              } catch (e) {\n                // Ignore exceptions.\n                console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n              }\n            }\n          }\n\n          const complete = () => {\n            const output = platformState.renderToString();\n            platform.destroy();\n            return output;\n          };\n\n          if (asyncPromises.length === 0) {\n            return complete();\n          }\n\n          return Promise\n              .all(asyncPromises.map(asyncPromise => {\n                return asyncPromise.catch(e => {\n                  console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n                });\n              }))\n              .then(complete);\n        });\n  });\n}\n\n/**\n * Renders a Module to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * If compiling with the ViewEngine renderer, do not use this in a production server environment.\n * Use pre-compiled {@link NgModuleFactory} with {@link renderModuleFactory} instead. If\n * compiling with the Ivy renderer, this method is the recommended rendering method for\n * platform-server.\n *\n * @publicApi\n */\nexport function renderModule<T>(\n    module: Type<T>, options: {document?: string, url?: string, extraProviders?: StaticProvider[]}):\n    Promise<string> {\n  const platform = _getPlatform(platformDynamicServer, options);\n  return _render(platform, platform.bootstrapModule(module));\n}\n\n/**\n * Renders a {@link NgModuleFactory} to string.\n *\n * `document` is the full document HTML of the page to render, as a string.\n * `url` is the URL for the current render request.\n * `extraProviders` are the platform level providers for the current render request.\n *\n * @publicApi\n */\nexport function renderModuleFactory<T>(\n    moduleFactory: NgModuleFactory<T>,\n    options: {document?: string, url?: string, extraProviders?: StaticProvider[]}):\n    Promise<string> {\n  const platform = _getPlatform(platformServer, options);\n  return _render(platform, platform.bootstrapModuleFactory(moduleFactory));\n}\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n\nexport {INTERNAL_SERVER_PLATFORM_PROVIDERS as ɵINTERNAL_SERVER_PLATFORM_PROVIDERS, SERVER_RENDER_PROVIDERS as ɵSERVER_RENDER_PROVIDERS} from './server';\nexport {ServerRendererFactory2 as ɵServerRendererFactory2} from './server_renderer';\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of the common package.\n */\n\nimport {Version} from '@angular/core';\n\n/**\n * @publicApi\n */\nexport const VERSION = new Version('10.1.1');\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nexport {PlatformState} from './platform_state';\nexport {platformDynamicServer, platformServer, ServerModule} from './server';\nexport {BEFORE_APP_SERIALIZED, INITIAL_CONFIG, PlatformConfig} from './tokens';\nexport {ServerTransferStateModule} from './transfer_state';\nexport {renderModule, renderModuleFactory} from './utils';\n\nexport * from './private_export';\nexport {VERSION} from './version';\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n/// <reference types=\"node\" />\n\n/**\n * @module\n * @description\n * Entry point for all public APIs of this package.\n */\nexport * from './src/platform-server';\n\n// This file only reexports content of the `src` folder. Keep it that way.\n","/**\n * @license\n * Copyright Google LLC All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\n// This file is not used to build this module. It is only used during editing\n// by the TypeScript language service and during build for verification. `ngc`\n// replaces this file with production index.ts when it rewrites private symbol\n// names.\n\nexport * from './public_api';\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './index';\n\nexport {SERVER_HTTP_PROVIDERS as ɵangular_packages_platform_server_platform_server_g,ServerXhr as ɵangular_packages_platform_server_platform_server_e,zoneWrappedInterceptingHandler as ɵangular_packages_platform_server_platform_server_f} from './src/http';\nexport {instantiateServerRendererFactory as ɵangular_packages_platform_server_platform_server_a} from './src/server';\nexport {ServerEventManagerPlugin as ɵangular_packages_platform_server_platform_server_d} from './src/server_events';\nexport {ServerStylesHost as ɵangular_packages_platform_server_platform_server_c} from './src/styles_host';\nexport {serializeTransferStateFactory as ɵangular_packages_platform_server_platform_server_b} from './src/transfer_state';"],"names":["setRootDomAdapter","BrowserDomAdapter","Injectable","Inject","DOCUMENT","InjectionToken","Observable","HttpInterceptingHandler","XhrFactory","HttpHandler","HttpBackend","Injector","PlatformLocation","url.parse","Subject","getDOM","Optional","DomElementSchemaRegistry","ViewEncapsulation","flattenStyles","EventManager","NgZone","SharedStylesHost","NAMESPACE_URIS","shimContentAttribute","shimHostAttribute","ɵTRANSITION_ID","PLATFORM_ID","PLATFORM_SERVER_ID","PLATFORM_INITIALIZER","ALLOW_MULTIPLE_PLATFORMS","ɵAnimationRendererFactory","RendererFactory2","ɵAnimationEngine","EVENT_MANAGER_PLUGINS","NgModule","BrowserModule","HttpClientModule","NoopAnimationsModule","Testability","ViewportScroller","NullViewportScroller","ɵsetDocument","createPlatformFactory","platformCore","platformCoreDynamic","escapeHtml","TransferState","APP_ID","ApplicationRef","first","ɵisPromise","Version"],"mappings":"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"}