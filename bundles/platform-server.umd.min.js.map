{"version":3,"sources":["packages/platform-server/platform-server.umd.js"],"names":["global","factory","exports","module","require","define","amd","self","ng","platformServer","common","core","platformBrowser","animations","browser","http","platformBrowserDynamic","rxjs","url","compiler","operators","this","i0","i1","extendStatics","d","b","Object","setPrototypeOf","__proto__","Array","p","hasOwnProperty","__extends","__","constructor","prototype","create","__read","o","n","m","Symbol","iterator","r","e","i","call","ar","next","done","push","value","error","__spread","arguments","length","concat","domino","parseDocument","html","createWindow","document","DominoAdapter","_super","_this","apply","supportsDOMEvents","makeCurrent","setDomTypes","assign","impl","Event","ɵsetRootDomAdapter","createHtmlDocument","getDefaultDocument","defaultDoc","createDocument","isElementNode","node","nodeType","ELEMENT_NODE","isShadowRoot","shadowRoot","getGlobalEventTarget","doc","target","defaultView","body","getBaseHref","_a","documentElement","querySelector","getAttribute","dispatchEvent","el","evt","win","ownerDocument","getUserAgent","getCookie","name","Error","ɵBrowserDomAdapter","PlatformState","_doc","renderToString","serializeDocument","serialize","getDocument","ɵfac","PlatformState_Factory","t","ɵɵinject","DOCUMENT","ɵprov","ɵɵdefineInjectable","token","INITIAL_CONFIG","InjectionToken","BEFORE_APP_SERIALIZED","xhr2","isAbsoluteUrl","ServerXhr","build","XMLHttpRequest","ServerXhr_Factory","ZoneClientBackend","backend","platformLocation","config","handle","request","href","protocol","hostname","port","useAbsoluteUrl","test","baseHref","getBaseHrefFromDOM","baseUrl","URL","wrap","clone","toString","delegate","ZoneMacroTaskWrapper","Observable","observer","task","scheduled","sub","savedResult","savedError","_task","subscribe","res","err","invoke","scheduleTask","Zone","current","scheduleMacroTask","complete","unsubscribe","zone","cancelTask","SERVER_HTTP_PROVIDERS","provide","XhrFactory","useClass","HttpHandler","useFactory","zoneWrappedInterceptingHandler","injector","realBackend","ɵHttpInterceptingHandler","deps","HttpBackend","Injector","PlatformLocation","parseUrl","urlStr","parsedUrl","parse","pathname","search","hash","ServerPlatformLocation","_config","_hashUpdate","Subject","url_1","location","url_2","ɵgetDOM","onPopState","fn","onHashChange","subscription","defineProperty","get","enumerable","configurable","setHash","oldUrl","newUrl","scheduleMicroTask","type","state","replaceState","title","pushState","forward","back","getState","ServerPlatformLocation_Factory","ServerEventManagerPlugin","supports","eventName","addEventListener","element","handler","onAndCancel","addGlobalEventListener","ServerEventManagerPlugin_Factory","EMPTY_ARRAY","DEFAULT_SCHEMA","DomElementSchemaRegistry","ServerRendererFactory2","eventManager","ngZone","sharedStylesHost","rendererByCompId","Map","schema","defaultRenderer","DefaultServerRenderer2","createRenderer","encapsulation","ViewEncapsulation","Emulated","renderer","id","EmulatedEncapsulationServerRenderer2","set","applyToHost","has","styles","ɵflattenStyles","addStyles","begin","end","ServerRendererFactory2_Factory","EventManager","NgZone","ɵSharedStylesHost","data","destroy","createElement","namespace","debugInfo","createElementNS","ɵNAMESPACE_URIS","createComment","createText","createTextNode","appendChild","parent","newChild","insertBefore","refChild","removeChild","oldChild","selectRootElement","selectorOrNode","firstChild","parentNode","nextSibling","setAttribute","setAttributeNS","removeAttribute","removeAttributeNS","addClass","classList","add","removeClass","remove","setStyle","style","flags","replace","toLowerCase","styleMap","_readStyleAttribute","styleAttribute","styleList","split","trim","colonIndex","indexOf","substr","RendererStyleFlags2","Important","_writeStyleAttribute","styleAttrValue","key","removeStyle","_isSafeToReflectProperty","tagName","propertyName","securityContext","setProperty","checkNoSyntheticProp","textContent","hasElement","hasProperty","setValue","listen","callback","decoratePreventDefault","eventHandler","event","Function","runGuarded","preventDefault","returnValue","AT_CHARCODE","charCodeAt","nameKind","component","componentId","contentAttr","ɵshimContentAttribute","hostAttr","ɵshimHostAttribute","ServerStylesHost","transitionId","head","_styleNodes","Set","getElementsByTagName","_addStyle","onStylesAdded","additions","forEach","ngOnDestroy","styleNode","ServerStylesHost_Factory","ɵTRANSITION_ID","ServerModule","INTERNAL_SERVER_PLATFORM_PROVIDERS","_document","ɵsetDocument","PLATFORM_ID","useValue","ɵPLATFORM_SERVER_ID","PLATFORM_INITIALIZER","initDominoAdapter","multi","Optional","ɵALLOW_MULTIPLE_PLATFORMS","SERVER_RENDER_PROVIDERS","RendererFactory2","instantiateServerRendererFactory","engine","ɵAnimationRendererFactory","ɵAnimationEngine","useExisting","EVENT_MANAGER_PLUGINS","ServerModule_Factory","ɵmod","ɵɵdefineNgModule","ɵinj","ɵɵdefineInjector","providers","Testability","ViewportScroller","ɵNullViewportScroller","imports","HttpClientModule","NoopAnimationsModule","BrowserModule","ngJitMode","ɵɵsetNgModuleScope","ServerTransferStateModule","createPlatformFactory","platformCore","platformDynamicServer","ɵplatformCoreDynamic","_getPlatform","platformFactory","options","extraProviders","_render","platform","moduleRefPromise","then","moduleRef","ApplicationRef","isStable","pipe","first","toPromise","e_1","platformState","asyncPromises","callbacks","callbacks_1","__values","s","TypeError","callbacks_1_1","callbackResult","ɵisPromise","console","warn","e_1_1","return","output","Promise","all","map","asyncPromise","catch","ServerTransferStateModule_Factory","TransferState","serializeTransferStateFactory","appId","transferStore","script","ɵescapeHtml","toJson","APP_ID","VERSION","Version","renderModule","bootstrapModule","renderModuleFactory","moduleFactory","bootstrapModuleFactory","ɵINTERNAL_SERVER_PLATFORM_PROVIDERS","ɵSERVER_RENDER_PROVIDERS","ɵServerRendererFactory2"],"mappings":"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","sourcesContent":["/**\n * @license Angular v12.0.0-next.4+20.sha-e3ea863\n * (c) 2010-2021 Google LLC. https://angular.io/\n * License: MIT\n */\n\n(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@angular/common'), require('@angular/core'), require('@angular/platform-browser'), require('@angular/animations/browser'), require('@angular/common/http'), require('@angular/platform-browser-dynamic'), require('@angular/platform-browser/animations'), require('rxjs'), require('url'), require('@angular/compiler'), require('rxjs/operators')) :\n    typeof define === 'function' && define.amd ? define('@angular/platform-server', ['exports', '@angular/common', '@angular/core', '@angular/platform-browser', '@angular/animations/browser', '@angular/common/http', '@angular/platform-browser-dynamic', '@angular/platform-browser/animations', 'rxjs', 'url', '@angular/compiler', 'rxjs/operators'], factory) :\n    (global = global || self, factory((global.ng = global.ng || {}, global.ng.platformServer = {}), global.ng.common, global.ng.core, global.ng.platformBrowser, global.ng.animations.browser, global.ng.common.http, global.ng.platformBrowserDynamic, global.ng.platformBrowser.animations, global.rxjs, global.url, global.ng.compiler, global.rxjs.operators));\n}(this, (function (exports, common, i0, i1, browser, http, platformBrowserDynamic, animations, rxjs, url, compiler, operators) { 'use strict';\n\n    /*! *****************************************************************************\n    Copyright (c) Microsoft Corporation.\n\n    Permission to use, copy, modify, and/or distribute this software for any\n    purpose with or without fee is hereby granted.\n\n    THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\n    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\n    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\n    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\n    PERFORMANCE OF THIS SOFTWARE.\n    ***************************************************************************** */\n    /* global Reflect, Promise */\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b)\n                if (b.hasOwnProperty(p))\n                    d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    function __extends(d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    }\n    var __assign = function () {\n        __assign = Object.assign || function __assign(t) {\n            for (var s, i = 1, n = arguments.length; i < n; i++) {\n                s = arguments[i];\n                for (var p in s)\n                    if (Object.prototype.hasOwnProperty.call(s, p))\n                        t[p] = s[p];\n            }\n            return t;\n        };\n        return __assign.apply(this, arguments);\n    };\n    function __rest(s, e) {\n        var t = {};\n        for (var p in s)\n            if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n                t[p] = s[p];\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n                if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n                    t[p[i]] = s[p[i]];\n            }\n        return t;\n    }\n    function __decorate(decorators, target, key, desc) {\n        var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n        if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\")\n            r = Reflect.decorate(decorators, target, key, desc);\n        else\n            for (var i = decorators.length - 1; i >= 0; i--)\n                if (d = decorators[i])\n                    r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n        return c > 3 && r && Object.defineProperty(target, key, r), r;\n    }\n    function __param(paramIndex, decorator) {\n        return function (target, key) { decorator(target, key, paramIndex); };\n    }\n    function __metadata(metadataKey, metadataValue) {\n        if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\")\n            return Reflect.metadata(metadataKey, metadataValue);\n    }\n    function __awaiter(thisArg, _arguments, P, generator) {\n        function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n        return new (P || (P = Promise))(function (resolve, reject) {\n            function fulfilled(value) { try {\n                step(generator.next(value));\n            }\n            catch (e) {\n                reject(e);\n            } }\n            function rejected(value) { try {\n                step(generator[\"throw\"](value));\n            }\n            catch (e) {\n                reject(e);\n            } }\n            function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n            step((generator = generator.apply(thisArg, _arguments || [])).next());\n        });\n    }\n    function __generator(thisArg, body) {\n        var _ = { label: 0, sent: function () { if (t[0] & 1)\n                throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n        return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function () { return this; }), g;\n        function verb(n) { return function (v) { return step([n, v]); }; }\n        function step(op) {\n            if (f)\n                throw new TypeError(\"Generator is already executing.\");\n            while (_)\n                try {\n                    if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done)\n                        return t;\n                    if (y = 0, t)\n                        op = [op[0] & 2, t.value];\n                    switch (op[0]) {\n                        case 0:\n                        case 1:\n                            t = op;\n                            break;\n                        case 4:\n                            _.label++;\n                            return { value: op[1], done: false };\n                        case 5:\n                            _.label++;\n                            y = op[1];\n                            op = [0];\n                            continue;\n                        case 7:\n                            op = _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                        default:\n                            if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) {\n                                _ = 0;\n                                continue;\n                            }\n                            if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) {\n                                _.label = op[1];\n                                break;\n                            }\n                            if (op[0] === 6 && _.label < t[1]) {\n                                _.label = t[1];\n                                t = op;\n                                break;\n                            }\n                            if (t && _.label < t[2]) {\n                                _.label = t[2];\n                                _.ops.push(op);\n                                break;\n                            }\n                            if (t[2])\n                                _.ops.pop();\n                            _.trys.pop();\n                            continue;\n                    }\n                    op = body.call(thisArg, _);\n                }\n                catch (e) {\n                    op = [6, e];\n                    y = 0;\n                }\n                finally {\n                    f = t = 0;\n                }\n            if (op[0] & 5)\n                throw op[1];\n            return { value: op[0] ? op[1] : void 0, done: true };\n        }\n    }\n    var __createBinding = Object.create ? (function (o, m, k, k2) {\n        if (k2 === undefined)\n            k2 = k;\n        Object.defineProperty(o, k2, { enumerable: true, get: function () { return m[k]; } });\n    }) : (function (o, m, k, k2) {\n        if (k2 === undefined)\n            k2 = k;\n        o[k2] = m[k];\n    });\n    function __exportStar(m, exports) {\n        for (var p in m)\n            if (p !== \"default\" && !exports.hasOwnProperty(p))\n                __createBinding(exports, m, p);\n    }\n    function __values(o) {\n        var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n        if (m)\n            return m.call(o);\n        if (o && typeof o.length === \"number\")\n            return {\n                next: function () {\n                    if (o && i >= o.length)\n                        o = void 0;\n                    return { value: o && o[i++], done: !o };\n                }\n            };\n        throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n    }\n    function __read(o, n) {\n        var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n        if (!m)\n            return o;\n        var i = m.call(o), r, ar = [], e;\n        try {\n            while ((n === void 0 || n-- > 0) && !(r = i.next()).done)\n                ar.push(r.value);\n        }\n        catch (error) {\n            e = { error: error };\n        }\n        finally {\n            try {\n                if (r && !r.done && (m = i[\"return\"]))\n                    m.call(i);\n            }\n            finally {\n                if (e)\n                    throw e.error;\n            }\n        }\n        return ar;\n    }\n    function __spread() {\n        for (var ar = [], i = 0; i < arguments.length; i++)\n            ar = ar.concat(__read(arguments[i]));\n        return ar;\n    }\n    function __spreadArrays() {\n        for (var s = 0, i = 0, il = arguments.length; i < il; i++)\n            s += arguments[i].length;\n        for (var r = Array(s), k = 0, i = 0; i < il; i++)\n            for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n                r[k] = a[j];\n        return r;\n    }\n    ;\n    function __await(v) {\n        return this instanceof __await ? (this.v = v, this) : new __await(v);\n    }\n    function __asyncGenerator(thisArg, _arguments, generator) {\n        if (!Symbol.asyncIterator)\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var g = generator.apply(thisArg, _arguments || []), i, q = [];\n        return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\n        function verb(n) { if (g[n])\n            i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\n        function resume(n, v) { try {\n            step(g[n](v));\n        }\n        catch (e) {\n            settle(q[0][3], e);\n        } }\n        function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n        function fulfill(value) { resume(\"next\", value); }\n        function reject(value) { resume(\"throw\", value); }\n        function settle(f, v) { if (f(v), q.shift(), q.length)\n            resume(q[0][0], q[0][1]); }\n    }\n    function __asyncDelegator(o) {\n        var i, p;\n        return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n        function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\n    }\n    function __asyncValues(o) {\n        if (!Symbol.asyncIterator)\n            throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n        var m = o[Symbol.asyncIterator], i;\n        return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n        function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n        function settle(resolve, reject, d, v) { Promise.resolve(v).then(function (v) { resolve({ value: v, done: d }); }, reject); }\n    }\n    function __makeTemplateObject(cooked, raw) {\n        if (Object.defineProperty) {\n            Object.defineProperty(cooked, \"raw\", { value: raw });\n        }\n        else {\n            cooked.raw = raw;\n        }\n        return cooked;\n    }\n    ;\n    var __setModuleDefault = Object.create ? (function (o, v) {\n        Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n    }) : function (o, v) {\n        o[\"default\"] = v;\n    };\n    function __importStar(mod) {\n        if (mod && mod.__esModule)\n            return mod;\n        var result = {};\n        if (mod != null)\n            for (var k in mod)\n                if (Object.hasOwnProperty.call(mod, k))\n                    __createBinding(result, mod, k);\n        __setModuleDefault(result, mod);\n        return result;\n    }\n    function __importDefault(mod) {\n        return (mod && mod.__esModule) ? mod : { default: mod };\n    }\n    function __classPrivateFieldGet(receiver, privateMap) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError(\"attempted to get private field on non-instance\");\n        }\n        return privateMap.get(receiver);\n    }\n    function __classPrivateFieldSet(receiver, privateMap, value) {\n        if (!privateMap.has(receiver)) {\n            throw new TypeError(\"attempted to set private field on non-instance\");\n        }\n        privateMap.set(receiver, value);\n        return value;\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var domino = require('domino');\n    function setDomTypes() {\n        // Make all Domino types available in the global env.\n        Object.assign(global, domino.impl);\n        global['KeyboardEvent'] = domino.impl.Event;\n    }\n    /**\n     * Parses a document string to a Document object.\n     */\n    function parseDocument(html, url) {\n        if (url === void 0) { url = '/'; }\n        var window = domino.createWindow(html, url);\n        var doc = window.document;\n        return doc;\n    }\n    /**\n     * Serializes a document to string.\n     */\n    function serializeDocument(doc) {\n        return doc.serialize();\n    }\n    /**\n     * DOM Adapter for the server platform based on https://github.com/fgnass/domino.\n     */\n    var DominoAdapter = /** @class */ (function (_super) {\n        __extends(DominoAdapter, _super);\n        function DominoAdapter() {\n            var _this = _super.apply(this, __spread(arguments)) || this;\n            _this.supportsDOMEvents = false;\n            return _this;\n        }\n        DominoAdapter.makeCurrent = function () {\n            setDomTypes();\n            common.ɵsetRootDomAdapter(new DominoAdapter());\n        };\n        DominoAdapter.prototype.createHtmlDocument = function () {\n            return parseDocument('<html><head><title>fakeTitle</title></head><body></body></html>');\n        };\n        DominoAdapter.prototype.getDefaultDocument = function () {\n            if (!DominoAdapter.defaultDoc) {\n                DominoAdapter.defaultDoc = domino.createDocument();\n            }\n            return DominoAdapter.defaultDoc;\n        };\n        DominoAdapter.prototype.isElementNode = function (node) {\n            return node ? node.nodeType === DominoAdapter.defaultDoc.ELEMENT_NODE : false;\n        };\n        DominoAdapter.prototype.isShadowRoot = function (node) {\n            return node.shadowRoot == node;\n        };\n        DominoAdapter.prototype.getGlobalEventTarget = function (doc, target) {\n            if (target === 'window') {\n                return doc.defaultView;\n            }\n            if (target === 'document') {\n                return doc;\n            }\n            if (target === 'body') {\n                return doc.body;\n            }\n            return null;\n        };\n        DominoAdapter.prototype.getBaseHref = function (doc) {\n            var _a;\n            // TODO(alxhub): Need relative path logic from BrowserDomAdapter here?\n            return ((_a = doc.documentElement.querySelector('base')) === null || _a === void 0 ? void 0 : _a.getAttribute('href')) || '';\n        };\n        DominoAdapter.prototype.dispatchEvent = function (el, evt) {\n            el.dispatchEvent(evt);\n            // Dispatch the event to the window also.\n            var doc = el.ownerDocument || el;\n            var win = doc.defaultView;\n            if (win) {\n                win.dispatchEvent(evt);\n            }\n        };\n        DominoAdapter.prototype.getUserAgent = function () {\n            return 'Fake user agent';\n        };\n        DominoAdapter.prototype.getCookie = function (name) {\n            throw new Error('getCookie has not been implemented');\n        };\n        return DominoAdapter;\n    }(i1.ɵBrowserDomAdapter));\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * Representation of the current platform state.\n     *\n     * @publicApi\n     */\n    var PlatformState = /** @class */ (function () {\n        function PlatformState(_doc) {\n            this._doc = _doc;\n        }\n        /**\n         * Renders the current state of the platform to string.\n         */\n        PlatformState.prototype.renderToString = function () {\n            return serializeDocument(this._doc);\n        };\n        /**\n         * Returns the current DOM state.\n         */\n        PlatformState.prototype.getDocument = function () {\n            return this._doc;\n        };\n        return PlatformState;\n    }());\n    PlatformState.ɵfac = function PlatformState_Factory(t) { return new (t || PlatformState)(i0.ɵɵinject(common.DOCUMENT)); };\n    PlatformState.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: PlatformState, factory: PlatformState.ɵfac });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(PlatformState, [{\n                type: i0.Injectable\n            }], function () {\n            return [{ type: undefined, decorators: [{\n                            type: i0.Inject,\n                            args: [common.DOCUMENT]\n                        }] }];\n        }, null);\n    })();\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * The DI token for setting the initial config for the platform.\n     *\n     * @publicApi\n     */\n    var INITIAL_CONFIG = new i0.InjectionToken('Server.INITIAL_CONFIG');\n    /**\n     * A function that will be executed when calling `renderModuleFactory` or `renderModule` just\n     * before current platform state is rendered to string.\n     *\n     * @publicApi\n     */\n    var BEFORE_APP_SERIALIZED = new i0.InjectionToken('Server.RENDER_MODULE_HOOK');\n\n    var xhr2 = require('xhr2');\n    // @see https://www.w3.org/Protocols/HTTP/1.1/draft-ietf-http-v11-spec-01#URI-syntax\n    var isAbsoluteUrl = /^[a-zA-Z\\-\\+.]+:\\/\\//;\n    var ServerXhr = /** @class */ (function () {\n        function ServerXhr() {\n        }\n        ServerXhr.prototype.build = function () {\n            return new xhr2.XMLHttpRequest();\n        };\n        return ServerXhr;\n    }());\n    ServerXhr.ɵfac = function ServerXhr_Factory(t) { return new (t || ServerXhr)(); };\n    ServerXhr.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ServerXhr, factory: ServerXhr.ɵfac });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerXhr, [{\n                type: i0.Injectable\n            }], null, null);\n    })();\n    var ZoneMacroTaskWrapper = /** @class */ (function () {\n        function ZoneMacroTaskWrapper() {\n        }\n        ZoneMacroTaskWrapper.prototype.wrap = function (request) {\n            var _this = this;\n            return new rxjs.Observable(function (observer) {\n                var task = null;\n                var scheduled = false;\n                var sub = null;\n                var savedResult = null;\n                var savedError = null;\n                var scheduleTask = function (_task) {\n                    task = _task;\n                    scheduled = true;\n                    var delegate = _this.delegate(request);\n                    sub = delegate.subscribe(function (res) { return savedResult = res; }, function (err) {\n                        if (!scheduled) {\n                            throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n                        }\n                        savedError = err;\n                        scheduled = false;\n                        task.invoke();\n                    }, function () {\n                        if (!scheduled) {\n                            throw new Error('An http observable was completed twice. This shouldn\\'t happen, please file a bug.');\n                        }\n                        scheduled = false;\n                        task.invoke();\n                    });\n                };\n                var cancelTask = function (_task) {\n                    if (!scheduled) {\n                        return;\n                    }\n                    scheduled = false;\n                    if (sub) {\n                        sub.unsubscribe();\n                        sub = null;\n                    }\n                };\n                var onComplete = function () {\n                    if (savedError !== null) {\n                        observer.error(savedError);\n                    }\n                    else {\n                        observer.next(savedResult);\n                        observer.complete();\n                    }\n                };\n                // MockBackend for Http is synchronous, which means that if scheduleTask is by\n                // scheduleMacroTask, the request will hit MockBackend and the response will be\n                // sent, causing task.invoke() to be called.\n                var _task = Zone.current.scheduleMacroTask('ZoneMacroTaskWrapper.subscribe', onComplete, {}, function () { return null; }, cancelTask);\n                scheduleTask(_task);\n                return function () {\n                    if (scheduled && task) {\n                        task.zone.cancelTask(task);\n                        scheduled = false;\n                    }\n                    if (sub) {\n                        sub.unsubscribe();\n                        sub = null;\n                    }\n                };\n            });\n        };\n        return ZoneMacroTaskWrapper;\n    }());\n    var ZoneClientBackend = /** @class */ (function (_super) {\n        __extends(ZoneClientBackend, _super);\n        function ZoneClientBackend(backend, platformLocation, config) {\n            var _this = _super.call(this) || this;\n            _this.backend = backend;\n            _this.platformLocation = platformLocation;\n            _this.config = config;\n            return _this;\n        }\n        ZoneClientBackend.prototype.handle = function (request) {\n            var _a = this.platformLocation, href = _a.href, protocol = _a.protocol, hostname = _a.hostname, port = _a.port;\n            if (this.config.useAbsoluteUrl && !isAbsoluteUrl.test(request.url) &&\n                isAbsoluteUrl.test(href)) {\n                var baseHref = this.platformLocation.getBaseHrefFromDOM() || href;\n                var urlPrefix = protocol + \"//\" + hostname + (port ? \":\" + port : '');\n                var baseUrl = new URL(baseHref, urlPrefix);\n                var url = new URL(request.url, baseUrl);\n                return this.wrap(request.clone({ url: url.toString() }));\n            }\n            return this.wrap(request);\n        };\n        ZoneClientBackend.prototype.delegate = function (request) {\n            return this.backend.handle(request);\n        };\n        return ZoneClientBackend;\n    }(ZoneMacroTaskWrapper));\n    function zoneWrappedInterceptingHandler(backend, injector, platformLocation, config) {\n        var realBackend = new http.ɵHttpInterceptingHandler(backend, injector);\n        return new ZoneClientBackend(realBackend, platformLocation, config);\n    }\n    var SERVER_HTTP_PROVIDERS = [\n        { provide: http.XhrFactory, useClass: ServerXhr }, {\n            provide: http.HttpHandler,\n            useFactory: zoneWrappedInterceptingHandler,\n            deps: [http.HttpBackend, i0.Injector, common.PlatformLocation, INITIAL_CONFIG]\n        }\n    ];\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function parseUrl(urlStr) {\n        var parsedUrl = url.parse(urlStr);\n        return {\n            hostname: parsedUrl.hostname || '',\n            protocol: parsedUrl.protocol || '',\n            port: parsedUrl.port || '',\n            pathname: parsedUrl.pathname || '',\n            search: parsedUrl.search || '',\n            hash: parsedUrl.hash || '',\n        };\n    }\n    /**\n     * Server-side implementation of URL state. Implements `pathname`, `search`, and `hash`\n     * but not the state stack.\n     */\n    var ServerPlatformLocation = /** @class */ (function () {\n        function ServerPlatformLocation(_doc, _config) {\n            this._doc = _doc;\n            this.href = '/';\n            this.hostname = '/';\n            this.protocol = '/';\n            this.port = '/';\n            this.pathname = '/';\n            this.search = '';\n            this.hash = '';\n            this._hashUpdate = new rxjs.Subject();\n            var config = _config;\n            if (!config) {\n                return;\n            }\n            if (config.url) {\n                var url_1 = parseUrl(config.url);\n                this.protocol = url_1.protocol;\n                this.hostname = url_1.hostname;\n                this.port = url_1.port;\n                this.pathname = url_1.pathname;\n                this.search = url_1.search;\n                this.hash = url_1.hash;\n                this.href = _doc.location.href;\n            }\n            if (config.useAbsoluteUrl) {\n                if (!config.baseUrl) {\n                    throw new Error(\"\\\"PlatformConfig.baseUrl\\\" must be set if \\\"useAbsoluteUrl\\\" is true\");\n                }\n                var url_2 = parseUrl(config.baseUrl);\n                this.protocol = url_2.protocol;\n                this.hostname = url_2.hostname;\n                this.port = url_2.port;\n            }\n        }\n        ServerPlatformLocation.prototype.getBaseHrefFromDOM = function () {\n            return common.ɵgetDOM().getBaseHref(this._doc);\n        };\n        ServerPlatformLocation.prototype.onPopState = function (fn) {\n            // No-op: a state stack is not implemented, so\n            // no events will ever come.\n            return function () { };\n        };\n        ServerPlatformLocation.prototype.onHashChange = function (fn) {\n            var subscription = this._hashUpdate.subscribe(fn);\n            return function () { return subscription.unsubscribe(); };\n        };\n        Object.defineProperty(ServerPlatformLocation.prototype, \"url\", {\n            get: function () {\n                return \"\" + this.pathname + this.search + this.hash;\n            },\n            enumerable: false,\n            configurable: true\n        });\n        ServerPlatformLocation.prototype.setHash = function (value, oldUrl) {\n            var _this = this;\n            if (this.hash === value) {\n                // Don't fire events if the hash has not changed.\n                return;\n            }\n            this.hash = value;\n            var newUrl = this.url;\n            scheduleMicroTask(function () { return _this._hashUpdate.next({ type: 'hashchange', state: null, oldUrl: oldUrl, newUrl: newUrl }); });\n        };\n        ServerPlatformLocation.prototype.replaceState = function (state, title, newUrl) {\n            var oldUrl = this.url;\n            var parsedUrl = parseUrl(newUrl);\n            this.pathname = parsedUrl.pathname;\n            this.search = parsedUrl.search;\n            this.setHash(parsedUrl.hash, oldUrl);\n        };\n        ServerPlatformLocation.prototype.pushState = function (state, title, newUrl) {\n            this.replaceState(state, title, newUrl);\n        };\n        ServerPlatformLocation.prototype.forward = function () {\n            throw new Error('Not implemented');\n        };\n        ServerPlatformLocation.prototype.back = function () {\n            throw new Error('Not implemented');\n        };\n        // History API isn't available on server, therefore return undefined\n        ServerPlatformLocation.prototype.getState = function () {\n            return undefined;\n        };\n        return ServerPlatformLocation;\n    }());\n    ServerPlatformLocation.ɵfac = function ServerPlatformLocation_Factory(t) { return new (t || ServerPlatformLocation)(i0.ɵɵinject(common.DOCUMENT), i0.ɵɵinject(INITIAL_CONFIG, 8)); };\n    ServerPlatformLocation.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ServerPlatformLocation, factory: ServerPlatformLocation.ɵfac });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerPlatformLocation, [{\n                type: i0.Injectable\n            }], function () {\n            return [{ type: undefined, decorators: [{\n                            type: i0.Inject,\n                            args: [common.DOCUMENT]\n                        }] }, { type: undefined, decorators: [{\n                            type: i0.Optional\n                        }, {\n                            type: i0.Inject,\n                            args: [INITIAL_CONFIG]\n                        }] }];\n        }, null);\n    })();\n    function scheduleMicroTask(fn) {\n        Zone.current.scheduleMicroTask('scheduleMicrotask', fn);\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    var ServerEventManagerPlugin /* extends EventManagerPlugin which is private */ = /** @class */ (function () {\n        function ServerEventManagerPlugin(doc) {\n            this.doc = doc;\n        }\n        // Handle all events on the server.\n        ServerEventManagerPlugin.prototype.supports = function (eventName) {\n            return true;\n        };\n        ServerEventManagerPlugin.prototype.addEventListener = function (element, eventName, handler) {\n            return common.ɵgetDOM().onAndCancel(element, eventName, handler);\n        };\n        ServerEventManagerPlugin.prototype.addGlobalEventListener = function (element, eventName, handler) {\n            var target = common.ɵgetDOM().getGlobalEventTarget(this.doc, element);\n            if (!target) {\n                throw new Error(\"Unsupported event target \" + target + \" for event \" + eventName);\n            }\n            return this.addEventListener(target, eventName, handler);\n        };\n        return ServerEventManagerPlugin;\n    }());\n    ServerEventManagerPlugin.ɵfac = function ServerEventManagerPlugin_Factory(t) { return new (t || ServerEventManagerPlugin /* extends EventManagerPlugin which is private */)(i0.ɵɵinject(common.DOCUMENT)); };\n    ServerEventManagerPlugin.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ServerEventManagerPlugin /* extends EventManagerPlugin which is private */, factory: ServerEventManagerPlugin /* extends EventManagerPlugin which is private */.ɵfac });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerEventManagerPlugin /* extends EventManagerPlugin which is private */, [{\n                type: i0.Injectable\n            }], function () {\n            return [{ type: undefined, decorators: [{\n                            type: i0.Inject,\n                            args: [common.DOCUMENT]\n                        }] }];\n        }, null);\n    })();\n\n    var EMPTY_ARRAY = [];\n    var DEFAULT_SCHEMA = new compiler.DomElementSchemaRegistry();\n    var ServerRendererFactory2 = /** @class */ (function () {\n        function ServerRendererFactory2(eventManager, ngZone, document, sharedStylesHost) {\n            this.eventManager = eventManager;\n            this.ngZone = ngZone;\n            this.document = document;\n            this.sharedStylesHost = sharedStylesHost;\n            this.rendererByCompId = new Map();\n            this.schema = DEFAULT_SCHEMA;\n            this.defaultRenderer = new DefaultServerRenderer2(eventManager, document, ngZone, this.schema);\n        }\n        ServerRendererFactory2.prototype.createRenderer = function (element, type) {\n            if (!element || !type) {\n                return this.defaultRenderer;\n            }\n            switch (type.encapsulation) {\n                case i0.ViewEncapsulation.Emulated: {\n                    var renderer = this.rendererByCompId.get(type.id);\n                    if (!renderer) {\n                        renderer = new EmulatedEncapsulationServerRenderer2(this.eventManager, this.document, this.ngZone, this.sharedStylesHost, this.schema, type);\n                        this.rendererByCompId.set(type.id, renderer);\n                    }\n                    renderer.applyToHost(element);\n                    return renderer;\n                }\n                default: {\n                    if (!this.rendererByCompId.has(type.id)) {\n                        var styles = i1.ɵflattenStyles(type.id, type.styles, []);\n                        this.sharedStylesHost.addStyles(styles);\n                        this.rendererByCompId.set(type.id, this.defaultRenderer);\n                    }\n                    return this.defaultRenderer;\n                }\n            }\n        };\n        ServerRendererFactory2.prototype.begin = function () { };\n        ServerRendererFactory2.prototype.end = function () { };\n        return ServerRendererFactory2;\n    }());\n    ServerRendererFactory2.ɵfac = function ServerRendererFactory2_Factory(t) { return new (t || ServerRendererFactory2)(i0.ɵɵinject(i1.EventManager), i0.ɵɵinject(i0.NgZone), i0.ɵɵinject(common.DOCUMENT), i0.ɵɵinject(i1.ɵSharedStylesHost)); };\n    ServerRendererFactory2.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ServerRendererFactory2, factory: ServerRendererFactory2.ɵfac });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerRendererFactory2, [{\n                type: i0.Injectable\n            }], function () {\n            return [{ type: i1.EventManager }, { type: i0.NgZone }, { type: undefined, decorators: [{\n                            type: i0.Inject,\n                            args: [common.DOCUMENT]\n                        }] }, { type: i1.ɵSharedStylesHost }];\n        }, null);\n    })();\n    var DefaultServerRenderer2 = /** @class */ (function () {\n        function DefaultServerRenderer2(eventManager, document, ngZone, schema) {\n            this.eventManager = eventManager;\n            this.document = document;\n            this.ngZone = ngZone;\n            this.schema = schema;\n            this.data = Object.create(null);\n        }\n        DefaultServerRenderer2.prototype.destroy = function () { };\n        DefaultServerRenderer2.prototype.createElement = function (name, namespace, debugInfo) {\n            if (namespace) {\n                var doc = this.document || common.ɵgetDOM().getDefaultDocument();\n                // TODO(FW-811): Ivy may cause issues here because it's passing around\n                // full URIs for namespaces, therefore this lookup will fail.\n                return doc.createElementNS(i1.ɵNAMESPACE_URIS[namespace], name);\n            }\n            return common.ɵgetDOM().createElement(name, this.document);\n        };\n        DefaultServerRenderer2.prototype.createComment = function (value, debugInfo) {\n            return common.ɵgetDOM().getDefaultDocument().createComment(value);\n        };\n        DefaultServerRenderer2.prototype.createText = function (value, debugInfo) {\n            var doc = common.ɵgetDOM().getDefaultDocument();\n            return doc.createTextNode(value);\n        };\n        DefaultServerRenderer2.prototype.appendChild = function (parent, newChild) {\n            parent.appendChild(newChild);\n        };\n        DefaultServerRenderer2.prototype.insertBefore = function (parent, newChild, refChild) {\n            if (parent) {\n                parent.insertBefore(newChild, refChild);\n            }\n        };\n        DefaultServerRenderer2.prototype.removeChild = function (parent, oldChild) {\n            if (parent) {\n                parent.removeChild(oldChild);\n            }\n        };\n        DefaultServerRenderer2.prototype.selectRootElement = function (selectorOrNode, debugInfo) {\n            var el;\n            if (typeof selectorOrNode === 'string') {\n                el = this.document.querySelector(selectorOrNode);\n                if (!el) {\n                    throw new Error(\"The selector \\\"\" + selectorOrNode + \"\\\" did not match any elements\");\n                }\n            }\n            else {\n                el = selectorOrNode;\n            }\n            while (el.firstChild) {\n                el.removeChild(el.firstChild);\n            }\n            return el;\n        };\n        DefaultServerRenderer2.prototype.parentNode = function (node) {\n            return node.parentNode;\n        };\n        DefaultServerRenderer2.prototype.nextSibling = function (node) {\n            return node.nextSibling;\n        };\n        DefaultServerRenderer2.prototype.setAttribute = function (el, name, value, namespace) {\n            if (namespace) {\n                // TODO(FW-811): Ivy may cause issues here because it's passing around\n                // full URIs for namespaces, therefore this lookup will fail.\n                el.setAttributeNS(i1.ɵNAMESPACE_URIS[namespace], namespace + ':' + name, value);\n            }\n            else {\n                el.setAttribute(name, value);\n            }\n        };\n        DefaultServerRenderer2.prototype.removeAttribute = function (el, name, namespace) {\n            if (namespace) {\n                // TODO(FW-811): Ivy may cause issues here because it's passing around\n                // full URIs for namespaces, therefore this lookup will fail.\n                el.removeAttributeNS(i1.ɵNAMESPACE_URIS[namespace], name);\n            }\n            else {\n                el.removeAttribute(name);\n            }\n        };\n        DefaultServerRenderer2.prototype.addClass = function (el, name) {\n            el.classList.add(name);\n        };\n        DefaultServerRenderer2.prototype.removeClass = function (el, name) {\n            el.classList.remove(name);\n        };\n        DefaultServerRenderer2.prototype.setStyle = function (el, style, value, flags) {\n            style = style.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();\n            var styleMap = _readStyleAttribute(el);\n            if (flags & i0.RendererStyleFlags2.Important) {\n                value += ' !important';\n            }\n            styleMap[style] = value == null ? '' : value;\n            _writeStyleAttribute(el, styleMap);\n        };\n        DefaultServerRenderer2.prototype.removeStyle = function (el, style, flags) {\n            // IE requires '' instead of null\n            // see https://github.com/angular/angular/issues/7916\n            this.setStyle(el, style, '', flags);\n        };\n        // The value was validated already as a property binding, against the property name.\n        // To know this value is safe to use as an attribute, the security context of the\n        // attribute with the given name is checked against that security context of the\n        // property.\n        DefaultServerRenderer2.prototype._isSafeToReflectProperty = function (tagName, propertyName) {\n            return this.schema.securityContext(tagName, propertyName, true) ===\n                this.schema.securityContext(tagName, propertyName, false);\n        };\n        DefaultServerRenderer2.prototype.setProperty = function (el, name, value) {\n            checkNoSyntheticProp(name, 'property');\n            if (name === 'innerText') {\n                // Domino does not support innerText. Just map it to textContent.\n                el.textContent = value;\n            }\n            el[name] = value;\n            // Mirror property values for known HTML element properties in the attributes.\n            // Skip `innerhtml` which is conservatively marked as an attribute for security\n            // purposes but is not actually an attribute.\n            var tagName = el.tagName.toLowerCase();\n            if (value != null && (typeof value === 'number' || typeof value == 'string') &&\n                name.toLowerCase() !== 'innerhtml' && this.schema.hasElement(tagName, EMPTY_ARRAY) &&\n                this.schema.hasProperty(tagName, name, EMPTY_ARRAY) &&\n                this._isSafeToReflectProperty(tagName, name)) {\n                this.setAttribute(el, name, value.toString());\n            }\n        };\n        DefaultServerRenderer2.prototype.setValue = function (node, value) {\n            node.textContent = value;\n        };\n        DefaultServerRenderer2.prototype.listen = function (target, eventName, callback) {\n            checkNoSyntheticProp(eventName, 'listener');\n            if (typeof target === 'string') {\n                return this.eventManager.addGlobalEventListener(target, eventName, this.decoratePreventDefault(callback));\n            }\n            return this.eventManager.addEventListener(target, eventName, this.decoratePreventDefault(callback));\n        };\n        DefaultServerRenderer2.prototype.decoratePreventDefault = function (eventHandler) {\n            var _this = this;\n            return function (event) {\n                // Ivy uses `Function` as a special token that allows us to unwrap the function\n                // so that it can be invoked programmatically by `DebugNode.triggerEventHandler`.\n                if (event === Function) {\n                    return eventHandler;\n                }\n                // Run the event handler inside the ngZone because event handlers are not patched\n                // by Zone on the server. This is required only for tests.\n                var allowDefaultBehavior = _this.ngZone.runGuarded(function () { return eventHandler(event); });\n                if (allowDefaultBehavior === false) {\n                    event.preventDefault();\n                    event.returnValue = false;\n                }\n                return undefined;\n            };\n        };\n        return DefaultServerRenderer2;\n    }());\n    var AT_CHARCODE = '@'.charCodeAt(0);\n    function checkNoSyntheticProp(name, nameKind) {\n        if (name.charCodeAt(0) === AT_CHARCODE) {\n            throw new Error(\"Found the synthetic \" + nameKind + \" \" + name + \". Please include either \\\"BrowserAnimationsModule\\\" or \\\"NoopAnimationsModule\\\" in your application.\");\n        }\n    }\n    var EmulatedEncapsulationServerRenderer2 = /** @class */ (function (_super) {\n        __extends(EmulatedEncapsulationServerRenderer2, _super);\n        function EmulatedEncapsulationServerRenderer2(eventManager, document, ngZone, sharedStylesHost, schema, component) {\n            var _this = _super.call(this, eventManager, document, ngZone, schema) || this;\n            _this.component = component;\n            // Add a 's' prefix to style attributes to indicate server.\n            var componentId = 's' + component.id;\n            var styles = i1.ɵflattenStyles(componentId, component.styles, []);\n            sharedStylesHost.addStyles(styles);\n            _this.contentAttr = i1.ɵshimContentAttribute(componentId);\n            _this.hostAttr = i1.ɵshimHostAttribute(componentId);\n            return _this;\n        }\n        EmulatedEncapsulationServerRenderer2.prototype.applyToHost = function (element) {\n            _super.prototype.setAttribute.call(this, element, this.hostAttr, '');\n        };\n        EmulatedEncapsulationServerRenderer2.prototype.createElement = function (parent, name) {\n            var el = _super.prototype.createElement.call(this, parent, name, this.document);\n            _super.prototype.setAttribute.call(this, el, this.contentAttr, '');\n            return el;\n        };\n        return EmulatedEncapsulationServerRenderer2;\n    }(DefaultServerRenderer2));\n    function _readStyleAttribute(element) {\n        var styleMap = {};\n        var styleAttribute = element.getAttribute('style');\n        if (styleAttribute) {\n            var styleList = styleAttribute.split(/;+/g);\n            for (var i = 0; i < styleList.length; i++) {\n                var style = styleList[i].trim();\n                if (style.length > 0) {\n                    var colonIndex = style.indexOf(':');\n                    if (colonIndex === -1) {\n                        throw new Error(\"Invalid CSS style: \" + style);\n                    }\n                    var name = style.substr(0, colonIndex).trim();\n                    styleMap[name] = style.substr(colonIndex + 1).trim();\n                }\n            }\n        }\n        return styleMap;\n    }\n    function _writeStyleAttribute(element, styleMap) {\n        var styleAttrValue = '';\n        for (var key in styleMap) {\n            var newValue = styleMap[key];\n            if (newValue != null) {\n                styleAttrValue += key + ':' + styleMap[key] + ';';\n            }\n        }\n        element.setAttribute('style', styleAttrValue);\n    }\n\n    var ServerStylesHost = /** @class */ (function (_super) {\n        __extends(ServerStylesHost, _super);\n        function ServerStylesHost(doc, transitionId) {\n            var _this = _super.call(this) || this;\n            _this.doc = doc;\n            _this.transitionId = transitionId;\n            _this.head = null;\n            _this._styleNodes = new Set();\n            _this.head = doc.getElementsByTagName('head')[0];\n            return _this;\n        }\n        ServerStylesHost.prototype._addStyle = function (style) {\n            var adapter = common.ɵgetDOM();\n            var el = adapter.createElement('style');\n            el.textContent = style;\n            if (!!this.transitionId) {\n                el.setAttribute('ng-transition', this.transitionId);\n            }\n            this.head.appendChild(el);\n            this._styleNodes.add(el);\n        };\n        ServerStylesHost.prototype.onStylesAdded = function (additions) {\n            var _this = this;\n            additions.forEach(function (style) { return _this._addStyle(style); });\n        };\n        ServerStylesHost.prototype.ngOnDestroy = function () {\n            this._styleNodes.forEach(function (styleNode) { return styleNode.remove(); });\n        };\n        return ServerStylesHost;\n    }(i1.ɵSharedStylesHost));\n    ServerStylesHost.ɵfac = function ServerStylesHost_Factory(t) { return new (t || ServerStylesHost)(i0.ɵɵinject(common.DOCUMENT), i0.ɵɵinject(i1.ɵTRANSITION_ID, 8)); };\n    ServerStylesHost.ɵprov = /*@__PURE__*/ i0.ɵɵdefineInjectable({ token: ServerStylesHost, factory: ServerStylesHost.ɵfac });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerStylesHost, [{\n                type: i0.Injectable\n            }], function () {\n            return [{ type: undefined, decorators: [{\n                            type: i0.Inject,\n                            args: [common.DOCUMENT]\n                        }] }, { type: undefined, decorators: [{\n                            type: i0.Optional\n                        }, {\n                            type: i0.Inject,\n                            args: [i1.ɵTRANSITION_ID]\n                        }] }];\n        }, null);\n    })();\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function notSupported(feature) {\n        throw new Error(\"platform-server does not support '\" + feature + \"'.\");\n    }\n    var INTERNAL_SERVER_PLATFORM_PROVIDERS = [\n        { provide: common.DOCUMENT, useFactory: _document, deps: [i0.Injector] },\n        { provide: i0.PLATFORM_ID, useValue: common.ɵPLATFORM_SERVER_ID },\n        { provide: i0.PLATFORM_INITIALIZER, useFactory: initDominoAdapter, multi: true, deps: [i0.Injector] }, {\n            provide: common.PlatformLocation,\n            useClass: ServerPlatformLocation,\n            deps: [common.DOCUMENT, [i0.Optional, INITIAL_CONFIG]]\n        },\n        { provide: PlatformState, deps: [common.DOCUMENT] },\n        // Add special provider that allows multiple instances of platformServer* to be created.\n        { provide: i0.ɵALLOW_MULTIPLE_PLATFORMS, useValue: true }\n    ];\n    function initDominoAdapter(injector) {\n        return function () {\n            DominoAdapter.makeCurrent();\n        };\n    }\n    function instantiateServerRendererFactory(renderer, engine, zone) {\n        return new animations.ɵAnimationRendererFactory(renderer, engine, zone);\n    }\n    var SERVER_RENDER_PROVIDERS = [\n        ServerRendererFactory2,\n        {\n            provide: i0.RendererFactory2,\n            useFactory: instantiateServerRendererFactory,\n            deps: [ServerRendererFactory2, browser.ɵAnimationEngine, i0.NgZone]\n        },\n        ServerStylesHost,\n        { provide: i1.ɵSharedStylesHost, useExisting: ServerStylesHost },\n        { provide: i1.EVENT_MANAGER_PLUGINS, multi: true, useClass: ServerEventManagerPlugin },\n    ];\n    /**\n     * The ng module for the server.\n     *\n     * @publicApi\n     */\n    var ServerModule = /** @class */ (function () {\n        function ServerModule() {\n        }\n        return ServerModule;\n    }());\n    ServerModule.ɵfac = function ServerModule_Factory(t) { return new (t || ServerModule)(); };\n    ServerModule.ɵmod = /*@__PURE__*/ i0.ɵɵdefineNgModule({ type: ServerModule });\n    ServerModule.ɵinj = /*@__PURE__*/ i0.ɵɵdefineInjector({ providers: [\n            SERVER_RENDER_PROVIDERS,\n            SERVER_HTTP_PROVIDERS,\n            { provide: i0.Testability, useValue: null },\n            { provide: common.ViewportScroller, useClass: common.ɵNullViewportScroller },\n        ], imports: [[http.HttpClientModule, animations.NoopAnimationsModule], i1.BrowserModule] });\n    (function () { (typeof ngJitMode === \"undefined\" || ngJitMode) && i0.ɵɵsetNgModuleScope(ServerModule, { imports: [http.HttpClientModule, animations.NoopAnimationsModule], exports: [i1.BrowserModule] }); })();\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerModule, [{\n                type: i0.NgModule,\n                args: [{\n                        exports: [i1.BrowserModule],\n                        imports: [http.HttpClientModule, animations.NoopAnimationsModule],\n                        providers: [\n                            SERVER_RENDER_PROVIDERS,\n                            SERVER_HTTP_PROVIDERS,\n                            { provide: i0.Testability, useValue: null },\n                            { provide: common.ViewportScroller, useClass: common.ɵNullViewportScroller },\n                        ],\n                    }]\n            }], null, null);\n    })();\n    function _document(injector) {\n        var config = injector.get(INITIAL_CONFIG, null);\n        var document = config && config.document ? parseDocument(config.document, config.url) :\n            common.ɵgetDOM().createHtmlDocument();\n        // Tell ivy about the global document\n        i0.ɵsetDocument(document);\n        return document;\n    }\n    /**\n     * @publicApi\n     */\n    var platformServer = i0.createPlatformFactory(i0.platformCore, 'server', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n    /**\n     * The server platform that supports the runtime compiler.\n     *\n     * @publicApi\n     */\n    var platformDynamicServer = i0.createPlatformFactory(platformBrowserDynamic.ɵplatformCoreDynamic, 'serverDynamic', INTERNAL_SERVER_PLATFORM_PROVIDERS);\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    function serializeTransferStateFactory(doc, appId, transferStore) {\n        return function () {\n            var script = doc.createElement('script');\n            script.id = appId + '-state';\n            script.setAttribute('type', 'application/json');\n            script.textContent = i1.ɵescapeHtml(transferStore.toJson());\n            doc.body.appendChild(script);\n        };\n    }\n    /**\n     * NgModule to install on the server side while using the `TransferState` to transfer state from\n     * server to client.\n     *\n     * @publicApi\n     */\n    var ServerTransferStateModule = /** @class */ (function () {\n        function ServerTransferStateModule() {\n        }\n        return ServerTransferStateModule;\n    }());\n    ServerTransferStateModule.ɵfac = function ServerTransferStateModule_Factory(t) { return new (t || ServerTransferStateModule)(); };\n    ServerTransferStateModule.ɵmod = /*@__PURE__*/ i0.ɵɵdefineNgModule({ type: ServerTransferStateModule });\n    ServerTransferStateModule.ɵinj = /*@__PURE__*/ i0.ɵɵdefineInjector({ providers: [\n            i1.TransferState, {\n                provide: BEFORE_APP_SERIALIZED,\n                useFactory: serializeTransferStateFactory,\n                deps: [common.DOCUMENT, i0.APP_ID, i1.TransferState],\n                multi: true,\n            }\n        ] });\n    (function () {\n        (typeof ngDevMode === \"undefined\" || ngDevMode) && i0.ɵsetClassMetadata(ServerTransferStateModule, [{\n                type: i0.NgModule,\n                args: [{\n                        providers: [\n                            i1.TransferState, {\n                                provide: BEFORE_APP_SERIALIZED,\n                                useFactory: serializeTransferStateFactory,\n                                deps: [common.DOCUMENT, i0.APP_ID, i1.TransferState],\n                                multi: true,\n                            }\n                        ]\n                    }]\n            }], null, null);\n    })();\n\n    function _getPlatform(platformFactory, options) {\n        var extraProviders = options.extraProviders ? options.extraProviders : [];\n        return platformFactory([\n            { provide: INITIAL_CONFIG, useValue: { document: options.document, url: options.url } },\n            extraProviders\n        ]);\n    }\n    function _render(platform, moduleRefPromise) {\n        return moduleRefPromise.then(function (moduleRef) {\n            var transitionId = moduleRef.injector.get(i1.ɵTRANSITION_ID, null);\n            if (!transitionId) {\n                throw new Error(\"renderModule[Factory]() requires the use of BrowserModule.withServerTransition() to ensure\\nthe server-rendered app can be properly bootstrapped into a client app.\");\n            }\n            var applicationRef = moduleRef.injector.get(i0.ApplicationRef);\n            return applicationRef.isStable.pipe((operators.first(function (isStable) { return isStable; })))\n                .toPromise()\n                .then(function () {\n                var e_1, _a;\n                var platformState = platform.injector.get(PlatformState);\n                var asyncPromises = [];\n                // Run any BEFORE_APP_SERIALIZED callbacks just before rendering to string.\n                var callbacks = moduleRef.injector.get(BEFORE_APP_SERIALIZED, null);\n                if (callbacks) {\n                    try {\n                        for (var callbacks_1 = __values(callbacks), callbacks_1_1 = callbacks_1.next(); !callbacks_1_1.done; callbacks_1_1 = callbacks_1.next()) {\n                            var callback = callbacks_1_1.value;\n                            try {\n                                var callbackResult = callback();\n                                if (i0.ɵisPromise(callbackResult)) {\n                                    // TODO: in TS3.7, callbackResult is void.\n                                    asyncPromises.push(callbackResult);\n                                }\n                            }\n                            catch (e) {\n                                // Ignore exceptions.\n                                console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n                            }\n                        }\n                    }\n                    catch (e_1_1) { e_1 = { error: e_1_1 }; }\n                    finally {\n                        try {\n                            if (callbacks_1_1 && !callbacks_1_1.done && (_a = callbacks_1.return)) _a.call(callbacks_1);\n                        }\n                        finally { if (e_1) throw e_1.error; }\n                    }\n                }\n                var complete = function () {\n                    var output = platformState.renderToString();\n                    platform.destroy();\n                    return output;\n                };\n                if (asyncPromises.length === 0) {\n                    return complete();\n                }\n                return Promise\n                    .all(asyncPromises.map(function (asyncPromise) {\n                    return asyncPromise.catch(function (e) {\n                        console.warn('Ignoring BEFORE_APP_SERIALIZED Exception: ', e);\n                    });\n                }))\n                    .then(complete);\n            });\n        });\n    }\n    /**\n     * Renders a Module to string.\n     *\n     * `document` is the full document HTML of the page to render, as a string.\n     * `url` is the URL for the current render request.\n     * `extraProviders` are the platform level providers for the current render request.\n     *\n     * If compiling with the ViewEngine renderer, do not use this in a production server environment.\n     * Use pre-compiled {@link NgModuleFactory} with {@link renderModuleFactory} instead. If\n     * compiling with the Ivy renderer, this method is the recommended rendering method for\n     * platform-server.\n     *\n     * @publicApi\n     */\n    function renderModule(module, options) {\n        var platform = _getPlatform(platformDynamicServer, options);\n        return _render(platform, platform.bootstrapModule(module));\n    }\n    /**\n     * Renders a {@link NgModuleFactory} to string.\n     *\n     * `document` is the full document HTML of the page to render, as a string.\n     * `url` is the URL for the current render request.\n     * `extraProviders` are the platform level providers for the current render request.\n     *\n     * @publicApi\n     */\n    function renderModuleFactory(moduleFactory, options) {\n        var platform = _getPlatform(platformServer, options);\n        return _render(platform, platform.bootstrapModuleFactory(moduleFactory));\n    }\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    /**\n     * @publicApi\n     */\n    var VERSION = new i0.Version('12.0.0-next.4+20.sha-e3ea863');\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n    // This file only reexports content of the `src` folder. Keep it that way.\n\n    /**\n     * @license\n     * Copyright Google LLC All Rights Reserved.\n     *\n     * Use of this source code is governed by an MIT-style license that can be\n     * found in the LICENSE file at https://angular.io/license\n     */\n\n    /**\n     * Generated bundle index. Do not edit.\n     */\n\n    exports.BEFORE_APP_SERIALIZED = BEFORE_APP_SERIALIZED;\n    exports.INITIAL_CONFIG = INITIAL_CONFIG;\n    exports.PlatformState = PlatformState;\n    exports.ServerModule = ServerModule;\n    exports.ServerTransferStateModule = ServerTransferStateModule;\n    exports.VERSION = VERSION;\n    exports.platformDynamicServer = platformDynamicServer;\n    exports.platformServer = platformServer;\n    exports.renderModule = renderModule;\n    exports.renderModuleFactory = renderModuleFactory;\n    exports.ɵINTERNAL_SERVER_PLATFORM_PROVIDERS = INTERNAL_SERVER_PLATFORM_PROVIDERS;\n    exports.ɵSERVER_RENDER_PROVIDERS = SERVER_RENDER_PROVIDERS;\n    exports.ɵServerRendererFactory2 = ServerRendererFactory2;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n//# sourceMappingURL=platform-server.umd.js.map\n"]}